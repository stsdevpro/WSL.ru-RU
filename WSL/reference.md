---
title: Справочные материалы по командам подсистемы Windows для Linux
description: См. список команд, управляющих подсистемой Windows для Linux, включая аргументы для выполнения команд Linux.
keywords: BashOnWindows, bash, wsl, windows, подсистема windows для linux, windowssubsystem, ubuntu
ms.date: 09/15/2020
ms.topic: article
ms.localizationpriority: high
ms.openlocfilehash: 6f98cb7b238e4b38c1a931a0e77e419efbcc319d
ms.sourcegitcommit: ba3399a5ffeffd23551315acd04ea6848d30693b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/17/2020
ms.locfileid: "90719173"
---
# <a name="command-reference-for-windows-subsystem-for-linux"></a>Справочные материалы по командам подсистемы Windows для Linux

Лучший способ взаимодействовать с подсистемой Windows для Linux — использовать команду `wsl.exe`.

## <a name="set-wsl-2-as-your-default-version"></a>Задать WSL 2 в качестве версии по умолчанию

Выполните следующую команду в PowerShell, чтобы задать WSL 2 в качестве версии по умолчанию при установке нового дистрибутива Linux:

```powershell
wsl --set-default-version 2
```

## <a name="set-your-distribution-version-to-wsl-1-or-wsl-2"></a>Установите вашу версию дистрибутива на WSL 1 или WSL 2

Вы можете проверить версию WSL, назначенную каждому из установленных дистрибутивов Linux, открыв командную строку PowerShell и введя команду (доступна только в [сборке Windows 19041](ms-settings:windowsupdate) или более поздней версии): `wsl -l -v`.

```bash
wsl --list --verbose
```

Чтобы настроить дистрибутив для одной из версий WSL, выполните:

```bash
wsl --set-version <distribution name> <versionNumber>
```

Не забудьте заменить `<distribution name>` на фактическое имя дистрибутива и `<versionNumber>` с номером "1" или "2". Вы можете всегда вернуться к WSL версии 1, выполнив эту команду и заменив "2" на "1".

Кроме того, если вы хотите сделать WSL 2 архитектурой по умолчанию, выполните следующую команду:

```bash
wsl --set-default-version 2
```

Будет установлена версия любого нового дистрибутива, установленного в WSL 2.

## `wsl.exe`

Ниже приведен список, содержащий все параметры `wsl.exe` при использовании в Windows версии 1903.

Использование: `wsl [Argument] [Options...] [CommandLine]`

### <a name="arguments-for-running-linux-commands"></a>Аргументы для выполнения команд Linux

* **Без аргументов**

  Если командная строка не указана, wsl.exe запускает оболочку по умолчанию.

* **--exec, -e \<CommandLine>**
  
  Выполнение указанной команды без использования оболочки Linux по умолчанию.

* **--**
  
  Остальная часть командной строки передается "как есть".

Приведенные выше команды также принимают следующие параметры.

* **--distribution, -d \<Distro>**

  Запуск указанного дистрибутива.

* **--user, -u \<UserName>**

  Выполнение от имени указанного пользователя.

### <a name="arguments-for-managing-windows-subsystem-for-linux"></a>Аргументы для управления подсистемой Windows для Linux

* **--export \<Distro> \<FileName>**
  
  Экспорт дистрибутива в TAR-файл. Именем файла может быть "-" для стандартного вывода.

* **--import \<Distro> \<InstallLocation> \<FileName>**
  
  Импорт указанного TAR-файла в качестве нового дистрибутива. Именем файла может быть "-" для стандартного ввода.

* **--list, -l [параметры]**
  
  Вывод списка дистрибутивов.

  Параметры:
  * **--all**

    Вывод списка всех дистрибутивов, включая дистрибутивы, которые сейчас устанавливаются или удаляются.

  * **--running**

    Вывод списка всех дистрибутивов, выполняемых в данный момент.

* **--set-default, -s \<Distro>**
  
  Указание дистрибутива, используемого по умолчанию.

* **--terminate, -t \<Distro>**
  
  Завершение указанного дистрибутива.

* **--unregister \<Distro>**
  
  Отмените регистрацию дистрибутива.

* **--help** отображает сведения об использовании.

## <a name="additional-commands"></a>Дополнительные команды

Доступны также устоявшиеся команды для взаимодействия с подсистемой Windows для Linux. Их функциональные возможности реализованы в `wsl.exe`, но эти команды по-прежнему можно использовать.

### `wslconfig.exe`

Эта команда позволяет настроить дистрибутив WSL. Ниже приводится список ее параметров.

Использование: `wslconfig [Argument] [Options...]`

#### <a name="arguments"></a>Аргументы

* **/l, /list [параметры]**
  
  Вывод списка зарегистрированных дистрибутивов.
  
Параметры:

* **/all** Дополнительный вывод списка всех дистрибутивов, включая дистрибутивы, которые сейчас устанавливаются или удаляются.

* **/running** Вывод списка всех дистрибутивов, выполняемых в данный момент.

* **/s, /setdefault \<Distro>** Задание дистрибутива, используемого по умолчанию.

* **/t, /terminate \<Distro>** Завершение работы дистрибутива.

* **/u, /unregister \<Distro>** Отмена регистрации дистрибутива.

* **/upgrade \<Distro>** Обновление дистрибутива до файловой системы WslFs.

### `bash.exe`

Эта команда используется для запуска оболочки Bash. Ниже приведены параметры, которые можно использовать с этой командой.

Использование: `bash [Options...]`

* **Параметр не задан**
  
  Запуск оболочки Bash в текущем каталоге. Если оболочка Bash не установлена, автоматически запускается `lxrun /install`.

* **~**
  
  Команда `bash ~` запускает оболочку Bash в корневом каталоге пользователя.  Это аналог команды `cd ~`.

* **-c \<command>**
  
  Выполнение команды, вывод выходных данных и возврат в командную строку Windows.

  Пример: `bash -c "ls"`.

## <a name="deprecated-commands"></a>Нерекомендуемые команды

Команда `lxrun.exe` была первой командой, используемой для установки подсистемы Windows для Linux и управления ею. Она считается нерекомендуемой в Windows 10 версии 1803 и более поздних версиях.

С помощью команды `lxrun.exe` можно взаимодействовать с подсистемой Windows для Linux (WSL) напрямую.  Эти команды устанавливаются в каталог `\Windows\System32` и могут выполняться в командной строке Windows или PowerShell.

| Команда                     | Описание                     |
|:----------------------------|:---------------------------|
| `lxrun`                     | Команда lxrun используется для управления экземпляром WSL. |
| `lxrun /install`            | Запускает процесс скачивания и установки. <br/> Можно добавить параметр **/y** для обхода всех запросов.  Запрос на подтверждение будет принят автоматически, а в качестве привилегированного пользователя будет задан пользователь по умолчанию.          |
| `lxrun /uninstall`          | Удаляет дистрибутив и образ Ubuntu.  По умолчанию это не приводит к удалению корневого каталога пользователя Ubuntu. <br/> Можно добавить параметр **/y** для автоматического принятия запроса на подтверждение. <br/>Параметр **/full** позволяет удалить дистрибутив вместе с корневым каталогом пользователя Ubuntu.         |
| `lxrun /setdefaultuser <userName>`     | Задает использование Bash по умолчанию для пользователя Ubuntu. Запрашивает пароль, если указанный пользователь не существует.  Дополнительные сведения: https://aka.ms/wslusers. <br/> Параметр **/y** позволяет обойти запрос пароля.  Пользователь будет создан без пароля.|
| `lxrun /update`            | Обновляет индекс пакетов подсистемы.          |
